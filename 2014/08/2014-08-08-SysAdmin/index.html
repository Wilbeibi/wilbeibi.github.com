
 <!DOCTYPE HTML>
<html >
<head>
  <meta charset="UTF-8">
  
    <title>A Primer to System Administration - Users and groups | Wilbeibi&#39;s Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Wilbeibi">
    
    <meta name="description" itemprop="description" content="Just some examples, no big deal. Tested on Ubuntu 14.04.">
    
    
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="wilbeibi" />
    <meta name="twitter:title" content="A Primer to System Administration - Users and groups | Wilbeibi&#39;s Blog" />
      
        <meta name="twitter:description" content="Just some examples, no big deal. Tested on Ubuntu 14.04." />
      
    
    
    <link rel="alternative" href="/atom.xml" title="Wilbeibi&#39;s Blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">

</head>

  <body>
    <header>
      <div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="Wilbeibi&#39;s Blog" title="Wilbeibi&#39;s Blog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Wilbeibi&#39;s Blog">Wilbeibi&#39;s Blog</a></h1>
				<h2 class="blog-motto">The trick, William Potter, is not minding that it hurts.</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:wilbeibi.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2014/08/2014-08-08-SysAdmin/" title="A Primer to System Administration - Users and groups" itemprop="url">A Primer to System Administration - Users and groups</a>
  </h1>
  <p class="article-author">By
       
		<a href="http://wilbeibi.com/about" title="Wilbeibi" target="_blank" itemprop="author">Wilbeibi</a>
		
  <p class="article-time">
    <time datetime="2014-08-08T04:00:00.000Z" itemprop="datePublished">Published Aug 8 2014</time>
    
  </p>
</header>
	<div class="article-content">
		
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">Contents</strong>
		
			<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#How_to_create_a_user"><span class="toc-number">1.</span> <span class="toc-text">How to create a user</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#How_to_create_a_group"><span class="toc-number">2.</span> <span class="toc-text">How to create a group</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#How_to_add_a_user_to_a_group"><span class="toc-number">3.</span> <span class="toc-text">How to add a user to a group</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#How_to_list_all_users_in_a_group"><span class="toc-number">4.</span> <span class="toc-text">How to list all users in a group</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#What_is_sticky_bit"><span class="toc-number">5.</span> <span class="toc-text">What is sticky bit</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#What_is_sticky_bit_looks_like"><span class="toc-number">5.1.</span> <span class="toc-text">What is sticky bit looks like</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#How_to_set_it"><span class="toc-number">5.2.</span> <span class="toc-text">How to set it</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#What_is_setuid"><span class="toc-number">6.</span> <span class="toc-text">What is setuid</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#How_to_set_it-1"><span class="toc-number">6.1.</span> <span class="toc-text">How to set it</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#And_it_is_dangerous"><span class="toc-number">6.2.</span> <span class="toc-text">And it is dangerous</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#BTW"><span class="toc-number">7.</span> <span class="toc-text">BTW</span></a></li></ol>
		
		</div>
		
		<h2 id="How_to_create_a_user">How to create a user</h2>
<p>By useradd:</p>
<pre><code><span class="input"><span class="prompt">useradd -m -d &lt;HomeDir&gt;</span> -g &lt;<span class="constant">Group</span>&gt; username</span>
</code></pre><p>It’s optional to specify the new user’s home directory and group, but I strongly suggest to do so. <code>-m</code> stands for create home, <code>-d</code> to allocate a directory. (Warning, don’t mess up <code>useradd</code> and <code>adduser</code>, the later one is a higher level’s implementation. Here is a <a href="http://askubuntu.com/questions/345974/what-is-the-difference-between-adduser-and-useradd" target="_blank" rel="external">detailed explanation of these two’s differences</a>.)</p>
<h2 id="How_to_create_a_group">How to create a group</h2>
<p>By groupadd:</p>
<pre><code><span class="title">groupadd</span> groupname
</code></pre><h2 id="How_to_add_a_user_to_a_group">How to add a user to a group</h2>
<p>By usermod:<br>    usermod -a -G <groupname> username</groupname></p>
<p>where <code>usermod</code> means modify a user account, <code>-a</code> stands for append, append this user to a group.</p>
<p><a href="http://www.cyberciti.biz/faq/howto-linux-add-user-to-group/" target="_blank" rel="external">Read more</a></p>
<h2 id="How_to_list_all_users_in_a_group">How to list all users in a group</h2>
<p>Well, there is not such a built-in command for that, but we can use:</p>
<pre><code><span class="keyword">grep</span> <span class="string">'^groupname'</span> <span class="regexp">/etc/g</span>roup
</code></pre><p>or <code>apt-get install members</code>, then</p>
<pre><code><span class="title">members</span> groupname
</code></pre><h2 id="What_is_sticky_bit">What is sticky bit</h2>
<h3 id="What_is_sticky_bit_looks_like">What is sticky bit looks like</h3>
<p>Sticky bit is used for directories. As wikipedia said:</p>
<blockquote>
<p>When the sticky bit is set, only the item’s owner, the directory’s owner, or root can rename or delete files. Without the sticky bit set, any user with write and execute permissions for the directory can rename or delete contained files, regardless of owner.</p>
</blockquote>
<p>For example, if the professor create a /homework directory with sticky bit, every student can upload their homework, but they cannot rename or delete other students’ homework.</p>
<h3 id="How_to_set_it">How to set it</h3>
<pre><code> chmod +t /path/<span class="built_in">to</span>/<span class="built_in">directory</span>
</code></pre><p>or</p>
<pre><code> <span class="keyword">chmod</span> <span class="number">1755</span>
</code></pre><p>where 1 stands for sticky bit, 7 for owner has all privilege, 5 for read and execute privilege for the group, and for others.</p>
<p>Now, /path/to/directory should looks like this (replaced last character):</p>
<pre><code><span class="tag">drwxr-xr-t</span>   1 <span class="tag">root</span>     <span class="tag">other</span>          0 <span class="tag">Nov</span> 10 12<span class="pseudo">:57</span> <span class="tag">test</span>
</code></pre><p>As wikipedia said, if the sticky-bit is set on the directory without the execution bit set for the others category, it is indicated with a capital T:</p>
<pre><code><span class="tag">drwxr-xr-T</span>   1 <span class="tag">root</span>     <span class="tag">other</span>          0 <span class="tag">Nov</span> 10 12<span class="pseudo">:57</span> <span class="tag">test</span>
</code></pre><p><a href="http://www.linuxnix.com/2012/01/sticky-bit-set-linux.html" target="_blank" rel="external">Read more …</a></p>
<h2 id="What_is_setuid">What is setuid</h2>
<p>One sentence explanation: Regardless of who runs this program, run it as the user who owns it, not the user that executes it.</p>
<h3 id="How_to_set_it-1">How to set it</h3>
<pre><code>chmod <span class="keyword">u</span>+<span class="keyword">s</span> /path/<span class="keyword">to</span>/<span class="keyword">file</span>
</code></pre><h3 id="And_it_is_dangerous">And it is dangerous</h3>
<p>For instance, a simple shell script <code>showfile.sh</code> has set setuid as root privilege:</p>
<pre><code> <span class="comment">#!/bin/sh</span>
 <span class="comment"># showfile</span>
 ls <span class="operator">-l</span> | sort
</code></pre><p>And If I am a bad guy, I could easily write script :</p>
<pre><code> rm -rf /<span class="keyword">some</span>/<span class="keyword">where</span>/important
</code></pre><p>and saved as name <code>ls</code>, add my <code>ls</code> to the front of $PATH. Now when I tried to run showfile.sh, Boom ! The files are deleted.</p>
<h2 id="BTW">BTW</h2>
<p>If you found grammar errors or typos, please feel free to help me <a href="https://github.com/Wilbeibi/wilbeibi_blog_src/edit/master/source/_posts/2014-08-08-SysAdmin.md" target="_blank" rel="external">correct it</a>.</p>
  
	</div>
		<footer class="article-footer clearfix">


  <div class="article-tags">
  
  <span></span> <a href="/tags/Sysadmin/">Sysadmin</a>
  </div>




<div class="article-share" id="share">

  <div data-url="http://wilbeibi.com/2014/08/2014-08-08-SysAdmin/" data-title="A Primer to System Administration - Users and groups | Wilbeibi&#39;s Blog" data-tsina="null" class="share clearfix">
  </div>

</div>
</footer>   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2014/08/2014-08-10-SysAdmin2/" title="A Primer to System Administration - Know Thy System">
  <strong>上一篇：</strong><br/>
  <span>
  A Primer to System Administration - Know Thy System</span>
</a>
</div>


<div class="next">
<a href="/2014/07/2014-7-21-gitAtoZ/"  title="How to deal with Git A-Z?">
 <strong>下一篇：</strong><br/> 
 <span>How to deal with Git A-Z?
</span>
</a>
</div>

</nav>

	
<section class="comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">Contents</strong>
 
 <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#How_to_create_a_user"><span class="toc-number">1.</span> <span class="toc-text">How to create a user</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#How_to_create_a_group"><span class="toc-number">2.</span> <span class="toc-text">How to create a group</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#How_to_add_a_user_to_a_group"><span class="toc-number">3.</span> <span class="toc-text">How to add a user to a group</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#How_to_list_all_users_in_a_group"><span class="toc-number">4.</span> <span class="toc-text">How to list all users in a group</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#What_is_sticky_bit"><span class="toc-number">5.</span> <span class="toc-text">What is sticky bit</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#What_is_sticky_bit_looks_like"><span class="toc-number">5.1.</span> <span class="toc-text">What is sticky bit looks like</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#How_to_set_it"><span class="toc-number">5.2.</span> <span class="toc-text">How to set it</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#What_is_setuid"><span class="toc-number">6.</span> <span class="toc-text">What is setuid</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#How_to_set_it-1"><span class="toc-number">6.1.</span> <span class="toc-text">How to set it</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#And_it_is_dangerous"><span class="toc-number">6.2.</span> <span class="toc-text">And it is dangerous</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#BTW"><span class="toc-number">7.</span> <span class="toc-text">BTW</span></a></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">Categories</p>
		<ul>
		
			<li><a href="/categories/Collection/" title="Collection">Collection<sup>2</sup></a></li>
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			<li><a href="/tags/Sysadmin/" title="Sysadmin">Sysadmin<sup>3</sup></a></li>
		
			<li><a href="/tags/notes/" title="notes">notes<sup>3</sup></a></li>
		
			<li><a href="/tags/miscellaneous/" title="miscellaneous">miscellaneous<sup>2</sup></a></li>
		
			<li><a href="/tags/writing/" title="writing">writing<sup>2</sup></a></li>
		
			<li><a href="/tags/git/" title="git">git<sup>2</sup></a></li>
		
			<li><a href="/tags/algorihms/" title="algorihms">algorihms<sup>1</sup></a></li>
		
			<li><a href="/tags/subscribe/" title="subscribe">subscribe<sup>1</sup></a></li>
		
			<li><a href="/tags/RSS/" title="RSS">RSS<sup>1</sup></a></li>
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">Links</p>
    <ul>
      <li><a href="http://stackbox.org" target="_blank" title="Stackbox">Stackbox's Blog</a></li>
      <li><a href="http://hugofeng.info" target="_blank" title="hugo">Flight log</a></li>
    </ul>
</div>

  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello,I&#39;m Wilbeibi, a backend developer <br/>
			May the force be with you.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		<a href="https://github.com/wilbeibi" target="_blank" class="icon-github" title="github"></a>
		
		
		
		<a href="https://twitter.com/wilbeibi" target="_blank" class="icon-twitter" title="twitter"></a>
		
		
		
		<a href="https://www.douban.com/people/wilbeibi" target="_blank" class="icon-douban" title="豆瓣"></a>
		
		
		
		<a href="mailto:wilbeibi@gmail.com" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
		<p class="copyright">Powered by <a href="http://zespia.tw/hexo/" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Pacman">Jacman</a> © 2015 
		
		<a href="http://wilbeibi.com/about" target="_blank" title="Wilbeibi">Wilbeibi</a>
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#share"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="#textlogo" class="article-back-to-top" title="Top"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="QRcode"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="Weibo"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});     
</script>



<script type="text/javascript">
  var duoshuoQuery = {short_name:"wilbeibi"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 


<script type="text/javascript">

var disqus_shortname = 'wilmatrix';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>






<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>


<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-37214024-1', 'wilbeibi.com');  
ga('send', 'pageview');
</script>


<div id="totop">
<a title="Back to Top"><img src="/img/scrollup.png"/></a>
</div>

<script src="/js/totop.js"></script>

<script type="text/x-mathjax-config"> 
MathJax.Hub.Config({ 
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]} 
}); 
</script>
<script type="text/javascript"
   src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
  </body>
</html>
