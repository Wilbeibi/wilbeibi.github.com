<!DOCTYPE HTML><html lang="zh-CN"><head><meta charset="UTF-8"><title>A Primer to System Administration - Users and groups | Wilbeibi Blog</title><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="author" content="Wilbeibi"><meta name="description" content="Just some examples, no big deal. Tested on Ubuntu 14.04."><meta property="og:type" content="article"><meta property="og:title" content="A Primer to System Administration - Users and groups"><meta property="og:url" content="http://wilbeibi.com/2014/08/2014-08-08-SysAdmin/index.html"><meta property="og:site_name" content="Wilbeibi Blog"><meta property="og:description" content="Just some examples, no big deal. Tested on Ubuntu 14.04."><meta property="og:updated_time" content="2016-12-08T22:00:04.000Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="A Primer to System Administration - Users and groups"><meta name="twitter:description" content="Just some examples, no big deal. Tested on Ubuntu 14.04."><link rel="alternative" href="/atom.xml" title="Wilbeibi Blog" type="application/atom+xml"><link rel="icon" href="/img/favicon.ico"><link rel="apple-touch-icon" href="/img/jacman.jpg"><link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg"><link rel="stylesheet" href="/css/style.css"></head></html><body><header><div><div id="imglogo"><a href="/"><img src="/img/logo.png" alt="Wilbeibi Blog" title="Wilbeibi Blog"></a></div><div id="textlogo"><h1 class="site-name"><a href="/" title="Wilbeibi Blog">Wilbeibi Blog</a></h1><h2 class="blog-motto">The trick, William Potter, is not minding that it hurts</h2></div><div class="navbar"><a class="navbutton navmobile" href="#" title="菜单"></a></div><nav class="animated"><ul><ul><li><a href="/">Home</a></li><li><a href="/archives">Archives</a></li><li><a href="/wiki/zh_CN/#!index.md" target="_blank">Wiki</a></li><li><a href="/about">About</a></li><li><form class="search" action="//google.com/search" method="get" accept-charset="utf-8"><label>Search</label><input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索"> <input type="hidden" name="q" value="site:wilbeibi.com"></form></li></ul></ul></nav></div></header><div id="container"><div id="main" class="post" itemscope itemprop="blogPost"><article itemprop="articleBody"><header class="article-info clearfix"><h1 itemprop="name"><a href="/2014/08/2014-08-08-SysAdmin/" title="A Primer to System Administration - Users and groups" itemprop="url">A Primer to System Administration - Users and groups</a></h1><p class="article-author">By <a href="/about" title="Wilbeibi" target="_blank" itemprop="author">Wilbeibi</a></p><p class="article-time"><time datetime="2014-08-08T07:00:00.000Z" itemprop="datePublished">发表于 2014-08-08</time></p></header><div class="article-content"><div id="toc" class="toc-article"><strong class="toc-title">文章目录</strong><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#How-to-create-a-user"><span class="toc-number">1.</span> <span class="toc-text">How to create a user</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#How-to-create-a-group"><span class="toc-number">2.</span> <span class="toc-text">How to create a group</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#How-to-add-a-user-to-a-group"><span class="toc-number">3.</span> <span class="toc-text">How to add a user to a group</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#How-to-list-all-users-in-a-group"><span class="toc-number">4.</span> <span class="toc-text">How to list all users in a group</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#What-is-sticky-bit"><span class="toc-number">5.</span> <span class="toc-text">What is sticky bit</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#What-is-sticky-bit-looks-like"><span class="toc-number">5.1.</span> <span class="toc-text">What is sticky bit looks like</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#How-to-set-it"><span class="toc-number">5.2.</span> <span class="toc-text">How to set it</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#What-is-setuid"><span class="toc-number">6.</span> <span class="toc-text">What is setuid</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#How-to-set-it-1"><span class="toc-number">6.1.</span> <span class="toc-text">How to set it</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#And-it-is-dangerous"><span class="toc-number">6.2.</span> <span class="toc-text">And it is dangerous</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#BTW"><span class="toc-number">7.</span> <span class="toc-text">BTW</span></a></li></ol></div><h2 id="How-to-create-a-user"><a href="#How-to-create-a-user" class="headerlink" title="How to create a user"></a>How to create a user</h2><p>By useradd:</p><pre><code>useradd -m -d &lt;HomeDir&gt; -g &lt;Group&gt; username
</code></pre><p>It’s optional to specify the new user’s home directory and group, but I strongly suggest to do so. <code>-m</code> stands for create home, <code>-d</code> to allocate a directory. (Warning, don’t mess up <code>useradd</code> and <code>adduser</code>, the later one is a higher level’s implementation. Here is a <a href="http://askubuntu.com/questions/345974/what-is-the-difference-between-adduser-and-useradd" target="_blank" rel="external">detailed explanation of these two’s differences</a>.)</p><h2 id="How-to-create-a-group"><a href="#How-to-create-a-group" class="headerlink" title="How to create a group"></a>How to create a group</h2><p>By groupadd:</p><pre><code>groupadd groupname
</code></pre><h2 id="How-to-add-a-user-to-a-group"><a href="#How-to-add-a-user-to-a-group" class="headerlink" title="How to add a user to a group"></a>How to add a user to a group</h2><p>By usermod:<br>usermod -a -G<groupname>username</groupname></p><p>where <code>usermod</code> means modify a user account, <code>-a</code> stands for append, append this user to a group.</p><p><a href="http://www.cyberciti.biz/faq/howto-linux-add-user-to-group/" target="_blank" rel="external">Read more</a></p><h2 id="How-to-list-all-users-in-a-group"><a href="#How-to-list-all-users-in-a-group" class="headerlink" title="How to list all users in a group"></a>How to list all users in a group</h2><p>Well, there is not such a built-in command for that, but we can use:</p><pre><code>grep &apos;^groupname&apos; /etc/group
</code></pre><p>or <code>apt-get install members</code>, then</p><pre><code>members groupname
</code></pre><h2 id="What-is-sticky-bit"><a href="#What-is-sticky-bit" class="headerlink" title="What is sticky bit"></a>What is sticky bit</h2><h3 id="What-is-sticky-bit-looks-like"><a href="#What-is-sticky-bit-looks-like" class="headerlink" title="What is sticky bit looks like"></a>What is sticky bit looks like</h3><p>Sticky bit is used for directories. As wikipedia said:</p><blockquote><p>When the sticky bit is set, only the item’s owner, the directory’s owner, or root can rename or delete files. Without the sticky bit set, any user with write and execute permissions for the directory can rename or delete contained files, regardless of owner.</p></blockquote><p>For example, if the professor create a /homework directory with sticky bit, every student can upload their homework, but they cannot rename or delete other students’ homework.</p><h3 id="How-to-set-it"><a href="#How-to-set-it" class="headerlink" title="How to set it"></a>How to set it</h3><pre><code>chmod +t /path/to/directory
</code></pre><p>or</p><pre><code>chmod 1755
</code></pre><p>where 1 stands for sticky bit, 7 for owner has all privilege, 5 for read and execute privilege for the group, and for others.</p><p>Now, /path/to/directory should looks like this (replaced last character):</p><pre><code>drwxr-xr-t   1 root     other          0 Nov 10 12:57 test
</code></pre><p>As wikipedia said, if the sticky-bit is set on the directory without the execution bit set for the others category, it is indicated with a capital T:</p><pre><code>drwxr-xr-T   1 root     other          0 Nov 10 12:57 test
</code></pre><p><a href="http://www.linuxnix.com/2012/01/sticky-bit-set-linux.html" target="_blank" rel="external">Read more …</a></p><h2 id="What-is-setuid"><a href="#What-is-setuid" class="headerlink" title="What is setuid"></a>What is setuid</h2><p>One sentence explanation: Regardless of who runs this program, run it as the user who owns it, not the user that executes it.</p><h3 id="How-to-set-it-1"><a href="#How-to-set-it-1" class="headerlink" title="How to set it"></a>How to set it</h3><pre><code>chmod u+s /path/to/file
</code></pre><h3 id="And-it-is-dangerous"><a href="#And-it-is-dangerous" class="headerlink" title="And it is dangerous"></a>And it is dangerous</h3><p>For instance, a simple shell script <code>showfile.sh</code> has set setuid as root privilege:</p><pre><code>#!/bin/sh
# showfile
ls -l | sort
</code></pre><p>And If I am a bad guy, I could easily write script :</p><pre><code>rm -rf /some/where/important
</code></pre><p>and saved as name <code>ls</code>, add my <code>ls</code> to the front of $PATH. Now when I tried to run showfile.sh, Boom ! The files are deleted.</p><h2 id="BTW"><a href="#BTW" class="headerlink" title="BTW"></a>BTW</h2><p>If you found grammar errors or typos, please feel free to help me <a href="https://github.com/Wilbeibi/wilbeibi_blog_src/edit/master/source/_posts/2014-08-08-SysAdmin.md" target="_blank" rel="external">correct it</a>.</p></div><footer class="article-footer clearfix"><div class="article-catetags"><div class="article-tags"><span></span> <a href="/tags/Sysadmin/">Sysadmin</a></div></div><div class="article-share" id="share"><div data-url="http://wilbeibi.com/2014/08/2014-08-08-SysAdmin/" data-title="A Primer to System Administration - Users and groups | Wilbeibi Blog" data-tsina="null" class="share clearfix"></div></div></footer></article><nav class="article-nav clearfix"><div class="prev"><a href="/2014/08/2014-08-10-SysAdmin2/" title="A Primer to System Administration - Know Thy System"><strong>上一篇：</strong><br><span>A Primer to System Administration - Know Thy System</span></a></div><div class="next"><a href="/2014/07/2014-7-21-gitAtoZ/" title="How to deal with Git A-Z?"><strong>下一篇：</strong><br><span>How to deal with Git A-Z?</span></a></div></nav><section id="comments" class="comment"><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></section></div><div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div><div id="toc" class="toc-aside"><strong class="toc-title">文章目录</strong><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#How-to-create-a-user"><span class="toc-number">1.</span> <span class="toc-text">How to create a user</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#How-to-create-a-group"><span class="toc-number">2.</span> <span class="toc-text">How to create a group</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#How-to-add-a-user-to-a-group"><span class="toc-number">3.</span> <span class="toc-text">How to add a user to a group</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#How-to-list-all-users-in-a-group"><span class="toc-number">4.</span> <span class="toc-text">How to list all users in a group</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#What-is-sticky-bit"><span class="toc-number">5.</span> <span class="toc-text">What is sticky bit</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#What-is-sticky-bit-looks-like"><span class="toc-number">5.1.</span> <span class="toc-text">What is sticky bit looks like</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#How-to-set-it"><span class="toc-number">5.2.</span> <span class="toc-text">How to set it</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#What-is-setuid"><span class="toc-number">6.</span> <span class="toc-text">What is setuid</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#How-to-set-it-1"><span class="toc-number">6.1.</span> <span class="toc-text">How to set it</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#And-it-is-dangerous"><span class="toc-number">6.2.</span> <span class="toc-text">And it is dangerous</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#BTW"><span class="toc-number">7.</span> <span class="toc-text">BTW</span></a></li></ol></div><div id="asidepart"><div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div><aside class="clearfix"><div class="categorieslist"><p class="asidetitle">分类</p><ul><li><a href="/categories/Collection/" title="Collection">Collection<sup>2</sup></a></li></ul></div><div class="tagslist"><p class="asidetitle">标签</p><ul class="clearfix"><li><a href="/tags/notes/" title="notes">notes<sup>8</sup></a></li><li><a href="/tags/writing/" title="writing">writing<sup>4</sup></a></li><li><a href="/tags/Sysadmin/" title="Sysadmin">Sysadmin<sup>3</sup></a></li><li><a href="/tags/git/" title="git">git<sup>2</sup></a></li><li><a href="/tags/miscellaneous/" title="miscellaneous">miscellaneous<sup>2</sup></a></li><li><a href="/tags/algorithms/" title="algorithms">algorithms<sup>2</sup></a></li><li><a href="/tags/python/" title="python">python<sup>2</sup></a></li><li><a href="/tags/RSS/" title="RSS">RSS<sup>1</sup></a></li><li><a href="/tags/subscribe/" title="subscribe">subscribe<sup>1</sup></a></li></ul></div><div class="linkslist"><p class="asidetitle">友情链接</p><ul><li><a href="http://kelunblog.com/" target="_blank" title="可伦的博客">可伦的博客</a></li><li><a href="https://www.jayxon.com/" target="_blank" title="JayXon&#39;s Blog">JayXon&#39;s Blog</a></li><li><a href="http://stackbox.org/" target="_blank" title="叠搭宝箱">叠搭宝箱</a></li><li><a href="http://victoriahong.com/" target="_blank" title="Victoria Hong">Victoria Hong</a></li></ul></div><div class="rsspart"><a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a></div></aside></div></div><footer><div id="footer"><div class="line"><span></span><div class="author"></div></div><section class="info"><p>強烈な努力<br></p></section><div class="social-font" class="clearfix"><a href="https://github.com/wilbeibi" target="_blank" class="icon-github" title="github"></a> <a href="http://stackoverflow.com/users/1035859" target="_blank" class="icon-stack-overflow" title="stackoverflow"></a> <a href="https://www.douban.com/people/wilbeibi" target="_blank" class="icon-douban" title="豆瓣"></a> <a href="mailto:wilbeibi@gmail.com" target="_blank" class="icon-email" title="Email Me"></a></div><div class="cc-license"><a href="http://creativecommons.org/licenses/by-nc/4.0" class="cc-opacity" target="_blank"><img src="/img/cc-by-nc.svg" alt="Creative Commons"></a></div><p class="copyright">Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2017 <a href="/about" target="_blank" title="Wilbeibi">Wilbeibi</a></p></div></footer><script src="/js/jquery-2.0.3.min.js"></script><script src="/js/jquery.imagesloaded.min.js"></script><script src="/js/gallery.js"></script><script type="text/javascript">$(document).ready(function(){function e(){"number"==typeof window.innerWidth?n=window.innerWidth:document.documentElement&&document.documentElement.clientWidth&&(n=document.documentElement.clientWidth)}$(".navbar").click(function(){$("header nav").toggleClass("shownav")});var n=0,s=$("#main"),a=$("#asidepart"),o=$(".closeaside"),d=$(".openaside");o.click(function(){a.addClass("fadeOut").css("display","none"),d.css("display","block").addClass("fadeIn"),s.addClass("moveMain")}),d.click(function(){d.css("display","none").removeClass("beforeFadeIn"),a.css("display","block").removeClass("fadeOut").addClass("fadeIn"),s.removeClass("moveMain")}),$(window).scroll(function(){d.css("top",Math.max(80,260-$(this).scrollTop()))}),$(window).resize(function(){e(),n>=1024?$("header nav").removeClass("shownav"):(s.removeClass("moveMain"),a.css("display","block").removeClass("fadeOut"),d.css("display","none"),$("#toc.toc-aside").css("display","none"))})})</script><script type="text/javascript">$(document).ready(function(){var c=$(".article-content>iframe"),n=$(".article-content>embed"),o=($("#toc"),$("#toc.toc-aside")),e=$(".openaside"),i=$(".closeaside");c.length>0&&c.wrap('<div class="video-container" />'),n.length>0&&n.wrap('<div class="video-container" />'),i.click(function(){o.css("display","block").addClass("fadeIn")}),e.click(function(){o.css("display","none")}),$(window).scroll(function(){o.css("top",Math.max(140,320-$(this).scrollTop()))})})</script><script type="text/javascript">$(document).ready(function(){var t=$(".share"),a=t.attr("data-url"),e=encodeURIComponent(a),r=t.attr("data-title"),c=t.attr("data-tsina"),i=(t.attr("description"),['<a href="#" class="overlay" id="qrcode"></a>','<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#nothing"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url='+e+'"/></div>','<a href="https://www.facebook.com/sharer.php?u='+e+'" class="article-share-facebook" target="_blank" title="Facebook"></a>','<a href="https://twitter.com/intent/tweet?url='+e+'" class="article-share-twitter" target="_blank" title="Twitter"></a>','<a href="#qrcode" class="article-share-qrcode" title="微信"></a>','<a href="http://service.weibo.com/share/share.php?title='+r+"&url="+e+"&ralateUid="+c+'&searchPic=true&style=number" class="article-share-weibo" target="_blank" title="微博"></a>','<span title="Share to"></span>'].join(""));t.append(i),$(".article-share-qrcode").click(function(){var t=$("#qrcode-pic").attr("data-src");$("#qrcode-pic").attr("src",t),$("#qrcode-pic").load(function(){$(".qrcode strong").text(" ")})})})</script><script type="text/javascript">var disqus_shortname="wilmatrix";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}(),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/count.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script><link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css"><script src="/fancybox/jquery.fancybox.pack.js"></script><script type="text/javascript">$(document).ready(function(){$(".article-content").each(function(a){$(this).find("img").each(function(){if(!$(this).parent().hasClass("fancybox")){var a=this.alt;a&&$(this).after('<span class="caption">'+a+"</span>"),$(this).wrap('<a href="'+this.src+'" title="'+a+'" class="fancybox"></a>')}}),$(this).find(".fancybox").each(function(){$(this).attr("rel","article"+a)})}),$.fancybox&&$(".fancybox").fancybox()})</script><script type="text/javascript">!function(e,a,n,t,c,i,o){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,i=a.createElement(n),o=a.getElementsByTagName(n)[0],i.async=1,i.src=t,o.parentNode.insertBefore(i,o)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-37214024-1","wilbeibi.com"),ga("send","pageview")</script><div id="totop"><a title="返回顶部"><img src="/img/scrollup.png"></a></div><script src="/js/totop.js"></script><!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
</body>